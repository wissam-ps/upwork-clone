(()=>{"use strict";var t={228:t=>{var n=Object.prototype.hasOwnProperty,e="~";function r(){}function o(t,n,e){this.fn=t,this.context=n,this.once=e||!1}function i(t,n,r,i,c){if("function"!=typeof r)throw new TypeError("The listener must be a function");var u=new o(r,i||t,c),a=e?e+n:n;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],u]:t._events[a].push(u):(t._events[a]=u,t._eventsCount++),t}function c(t,n){0==--t._eventsCount?t._events=new r:delete t._events[n]}function u(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(e=!1)),u.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)n.call(t,r)&&o.push(e?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},u.prototype.listeners=function(t){var n=e?e+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,c=new Array(i);o<i;o++)c[o]=r[o].fn;return c},u.prototype.listenerCount=function(t){var n=e?e+t:t,r=this._events[n];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,n,r,o,i,c){var u=e?e+t:t;if(!this._events[u])return!1;var a,s,l=this._events[u],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,n),!0;case 3:return l.fn.call(l.context,n,r),!0;case 4:return l.fn.call(l.context,n,r,o),!0;case 5:return l.fn.call(l.context,n,r,o,i),!0;case 6:return l.fn.call(l.context,n,r,o,i,c),!0}for(s=1,a=new Array(f-1);s<f;s++)a[s-1]=arguments[s];l.fn.apply(l.context,a)}else{var p,d=l.length;for(s=0;s<d;s++)switch(l[s].once&&this.removeListener(t,l[s].fn,void 0,!0),f){case 1:l[s].fn.call(l[s].context);break;case 2:l[s].fn.call(l[s].context,n);break;case 3:l[s].fn.call(l[s].context,n,r);break;case 4:l[s].fn.call(l[s].context,n,r,o);break;default:if(!a)for(p=1,a=new Array(f-1);p<f;p++)a[p-1]=arguments[p];l[s].fn.apply(l[s].context,a)}}return!0},u.prototype.on=function(t,n,e){return i(this,t,n,e,!1)},u.prototype.once=function(t,n,e){return i(this,t,n,e,!0)},u.prototype.removeListener=function(t,n,r,o){var i=e?e+t:t;if(!this._events[i])return this;if(!n)return c(this,i),this;var u=this._events[i];if(u.fn)u.fn!==n||o&&!u.once||r&&u.context!==r||c(this,i);else{for(var a=0,s=[],l=u.length;a<l;a++)(u[a].fn!==n||o&&!u[a].once||r&&u[a].context!==r)&&s.push(u[a]);s.length?this._events[i]=1===s.length?s[0]:s:c(this,i)}return this},u.prototype.removeAllListeners=function(t){var n;return t?(n=e?e+t:t,this._events[n]&&c(this,n)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,t.exports=u}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return t[r](i,i.exports,e),i.exports}(()=>{const t=e(228),n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let r;const o=new Uint8Array(16);function i(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}const c=[];for(let t=0;t<256;++t)c.push((t+256).toString(16).slice(1));function u(t,n=0){return c[t[n+0]]+c[t[n+1]]+c[t[n+2]]+c[t[n+3]]+"-"+c[t[n+4]]+c[t[n+5]]+"-"+c[t[n+6]]+c[t[n+7]]+"-"+c[t[n+8]]+c[t[n+9]]+"-"+c[t[n+10]]+c[t[n+11]]+c[t[n+12]]+c[t[n+13]]+c[t[n+14]]+c[t[n+15]]}const a=function(t,e,r){if(n.randomUUID&&!e&&!t)return n.randomUUID();const o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=o[t];return e}return u(o)};function s(){return t=(new Date).getTime(),parseFloat(t.toString().replace(/(\d{3})$/,".$1"));var t}function l(){return a().replace(/-/g,"")}var f;function p(){return void 0!==window.pdst?f.VersionA:f.VersionB}!function(t){t.VersionA="a",t.VersionB="b"}(f||(f={}));var d={},_=!1,v=function(){d={key:null,lifetime:365,group:null,label:null,experiment:null}};function h(t){return Object.prototype.hasOwnProperty.call(d,t)?d[t]:null}v();var y=function(){return function(t){return"string"==typeof t?t:"number"==typeof t?t.toString():null}},w=function(){return function(t){var n=parseInt(t,10);return isNaN(n)?null:n}},m=function(){return function(t){var n=parseFloat(t);return isNaN(n)?null:n}},g=function(){return function(t){return["True","true","1",1,!0].indexOf(t)>-1||!(["False","false","0",0,!1].indexOf(t)>-1)&&null}},O=function(t){return function(n){var e;if(Array.isArray(n))e=n;else{if(null==n)return null;e=[n]}return t?e.map((function(n){return Object.keys(t).reduce((function(e,r){return e[r]=t[r](n[r]),e}),{})})):e}},b=function(t){return function(n){return n?t?Object.keys(t).reduce((function(e,r){return e[r]=t[r](n[r]),e}),{}):n:{}}};const S=function(){function t(){this.time=s(),this.action=null,this.group=null,this.label=null,this.experiment=null,this.fields={event_id:y()}}return t.prototype.update=function(t){var n=this;t&&Object.keys(this.fields).reduce((function(e,r){r in t&&(n[r]=t[r])}),{})},t.prototype.data=function(){var t=this;return{action:this.action,time:this.time,group:null!==this.group?this.group:h("group"),label:null!==this.label?this.label:h("label"),experiment:null!==this.experiment?this.experiment:h("experiment"),body:Object.keys(this.fields).reduce((function(n,e){return n[e]=t.fields[e](t[e]),n}),{})}},t}();var T,j=(T=function(t,n){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},T(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}T(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),E=function(){return E=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},E.apply(this,arguments)};const P=function(t){function n(n){var e=t.call(this)||this;e.action="view";var r=b({source:y(),placement:y(),from:y()});e.fields=E({url:y(),referrer:y(),inIframe:g(),windowWidth:w(),windowHeight:w(),timezoneOffset:w()},{viewParams:r}),e.url=n.url?n.url:window.location.toString(),e.referrer=n.referrer?n.referrer:document.referrer,e.inIframe=function(){try{return window.self!==window.top}catch(t){return!0}}(),e.windowWidth=window.innerWidth,e.windowHeight=window.innerHeight,e.timezoneOffset=(new Date).getTimezoneOffset();var o={source:n.source?n.source:null,placement:n.placement?n.placement:null,from:n.from?n.from:null};return e.params=o,e}return j(n,t),n}(S);var x=["url","referrer"];var C=function(t,n,e){var r="";if(e){var o=new Date;o.setTime(o.getTime()+24*e*60*60*1e3),r="; expires=".concat(o.toUTCString())}document.cookie="".concat(t,"=").concat(n).concat(r,"; SameSite=Strict; path=/")},U=function(t){for(var n="".concat(t,"="),e=document.cookie.split(";"),r=0;r<e.length;r+=1){for(var o=e[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null},k=p()===f.VersionA?"__pdst":"__spdt",I=function(){var t=U(k);return t||(t=l(),C(k,t,h("lifetime")),t=U(k)),t||"0"},A=function(){var t="0";if(window.sessionStorage){var n=sessionStorage.getItem(k);n||(sessionStorage.setItem(k,l()),n=sessionStorage.getItem(k)),t=n||"0"}return t},N={user:I(),session:A(),page:l()};const V=N;var M={},D=function(t){if(!t)return!1;var n,e="spdt-".concat(s(),"-").concat((void 0===n&&(n=1e3),Math.floor(Math.random()*n))),r={order:0,pid:V.page,sid:V.session,event:t};try{r.order=localStorage.length,localStorage.setItem(e,JSON.stringify(r))}catch(t){r.order=Object.keys(M).length,M[e]=r}return!0};var L=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),R=function(){return R=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},R.apply(this,arguments)};const q=function(t){function n(n){var e=t.call(this)||this;e.action="alias",n.alias_id=n.id,n.user_hashed_email=n.email,n.user_hashed_phone_number=n.phone_number,n.click_id?sessionStorage.setItem("click_id",n.click_id):n.click_id=sessionStorage.getItem("click_id"),delete n.id,delete n.email,delete n.phone_number,e.fields=R(R({},e.fields),{alias_id:y(),user_hashed_email:y(),user_hashed_phone_number:y(),partner_user_id:y(),click_id:y()});var r=n.alias_id,o=n.user_hashed_email,i=n.user_hashed_phone_number,c=n.partner_user_id,u=n.click_id;return r&&localStorage.setItem("alias_id",r),o&&localStorage.setItem("user_hashed_email",o),i&&localStorage.setItem("user_hashed_phone_number",i),c&&localStorage.setItem("partner_user_id",c),u&&sessionStorage.setItem("click_id",u),e.update(n),e}return L(n,t),n}(S);var H=[],F=function(t){var n=function(){var t=Object.keys(M).map((function(t){return M[t]}));if(window.localStorage)for(var n=0;n<localStorage.length;n+=1){var e=localStorage.key(n);if(e&&/^spdt-[.\d]+-\d+/.test(e)){var r=localStorage.getItem(e);null!==r&&t.push(JSON.parse(r))}}var o=t.reduce((function(t,n){var e="".concat(n.sid,".").concat(n.pid);return e in t?t[e].push(n):t[e]=[n],t}),{});return Object.keys(o).map((function(t){return o[t].sort((function(t,n){return t.order-n.order}))})).sort((function(t,n){return t[0].order-n[0].order})).map((function(t){return{pid:t[0].pid,sid:t[0].sid,events:t.map((function(t){return t.event}))}}))}();!function(){for(var t=window.localStorage?localStorage.length:0,n=[],e=0;e<=t;e+=1){var r=localStorage.key(e);r&&/^spdt-[.\d]+-\d+/.test(r)&&n.push(r)}n.forEach((function(t){localStorage.removeItem(t)})),M={}}();var e=n.some((function(t){return t.events.some((function(t){return"alias"===t.action}))})),r=localStorage.getItem("alias_id"),o=localStorage.getItem("user_hashed_email"),i=localStorage.getItem("user_hashed_phone_number"),c=localStorage.getItem("partner_user_id"),u=sessionStorage.getItem("click_id");if(!e&&(r||o||i||c||u)){var a={};r&&(a.id=r),o&&(a.email=o),i&&(a.phone_number=i),c&&(a.partner_user_id=c),u&&(a.click_id=u);var l=new q(a).data();n.forEach((function(t){t.events.some((function(t){return"alias"===t.action}))||t.events.push(l)}))}if(0===n.length)return!1;var f=V.page;n.forEach((function(t){t.pid===f&&(H=H.concat(t.events))}));var d=n.map((function(t){var n={pixel_id:h("key")};return Object.assign(t,{uid:V.user,time:s(),pixel_version:"".concat("2.0.4","-").concat(p())},n)}));return t.emit("api.capture",d),!0};function W(t){t.addListener("api.capture",(function(n){(function(t){var n={batch:t};return fetch("https://pixels.spotify.com/v1/ingest",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)}).catch((function(){}))})(n).then((function(){t.emit("api.captured")}))}))}var z=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function c(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(c,u)}a((r=r.apply(t,n||[])).next())}))},G=function(t,n){var e,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(c=0)),c;)try{if(e=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,r=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){c.label=u[1];break}if(6===u[0]&&c.label<o[1]){c.label=o[1],o=u;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(u);break}o[2]&&c.ops.pop(),c.trys.pop();continue}u=n.call(t,c)}catch(t){u=[6,t],r=0}finally{e=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}};function J(t){var n=this;return t.addListener("alias",(function(e,r){var o=["email","phone_number"].map((function(t){if(e&&e.hasOwnProperty(t)&&"string"==typeof e[t])return function(t){return z(n,void 0,void 0,(function(){var n,r,o,i;return G(this,(function(c){switch(c.label){case 0:return n=e[t].trim().toLowerCase(),r=(new TextEncoder).encode(n),[4,crypto.subtle.digest("SHA-256",r)];case 1:return o=c.sent(),i=Array.from(new Uint8Array(o)),e[t]=i.map((function(t){return t.toString(16).padStart(2,"0")})).join(""),[2]}}))}))}(t)}));Promise.all(o).then((function(){t.emit("event",new q(e),r)}))}))}var K=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),B=function(){return B=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},B.apply(this,arguments)};const $=function(t){function n(n){var e=t.call(this)||this;return e.action="product",e.fields=B(B({},e.fields),{value:m(),currency:y(),product_id:y(),product_name:y(),product_type:y(),product_vendor:y()}),e.update(n),e}return K(n,t),n}(S);var Q=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),X=function(){return X=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},X.apply(this,arguments)};const Y=function(t){function n(n){var e=t.call(this)||this;return e.action="addtocart",e.fields=X(X({},e.fields),{value:m(),quantity:w(),currency:y(),product_id:y(),product_name:y(),product_type:y(),product_vendor:y(),variant_id:y(),variant_name:y()}),e.update(n),e}return Q(n,t),n}(S);var Z=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tt=function(){return tt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},tt.apply(this,arguments)};const nt=function(t){function n(n){var e=t.call(this)||this;return e.action="purchase",e.fields=tt(tt({},e.fields),{value:m(),quantity:w(),currency:y(),discount_code:y(),order_id:y(),is_new_customer:g(),line_items:O({value:m(),quantity:w(),product_id:y(),product_name:y(),product_type:y(),product_vendor:y(),variant_id:y(),variant_name:y()})}),e.update(n),e}return Z(n,t),n}(S);var et=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rt=function(){return rt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},rt.apply(this,arguments)};const ot=function(t){function n(n){var e=t.call(this)||this;return e.action="checkout",e.fields=rt(rt({},e.fields),{value:m(),quantity:w(),currency:y(),discount_code:y(),line_items:O({value:m(),quantity:w(),product_id:y(),product_name:y(),product_type:y(),product_vendor:y(),variant_id:y(),variant_name:y()})}),e.update(n),e}return et(n,t),n}(S);var it=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ct=function(){return ct=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},ct.apply(this,arguments)};const ut=function(t){function n(n){var e=t.call(this)||this;return e.action="lead",e.fields=ct(ct({},e.fields),{type:y(),category:y(),value:m(),currency:y()}),e.update(n),e}return it(n,t),n}(S);var at=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),st=function(){return st=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},st.apply(this,arguments)};const lt=function(t){function n(n){var e=t.call(this)||this;return e.action="signup",e.fields=st(st({},e.fields),{sign_up_method:y()}),e.update(n),e}return at(n,t),n}(S);var ft=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pt=function(){return pt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},pt.apply(this,arguments)};const dt=function(t){function n(n){var e=t.call(this)||this;return e.action="click",e.fields=pt(pt({},e.fields),{type:y(),category:y()}),e.update(n),e}return ft(n,t),n}(S);var _t="__spdt_opt_out";var vt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ht=function(){return ht=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},ht.apply(this,arguments)};const yt=function(t){function n(n,e){var r=t.call(this)||this;return r.action=n,r.fields=ht(ht({},r.fields),{custom_event_name:y(),value:m(),quantity:w(),currency:y(),discount_code:y(),order_id:y(),is_new_customer:g(),type:y(),category:y(),product_id:y(),product_name:y(),product_type:y(),product_vendor:y(),variant_id:y(),variant_name:y(),id:y(),email:y(),line_items:O({value:m(),quantity:w(),product_id:y(),product_name:y(),product_type:y(),product_vendor:y(),variant_id:y(),variant_name:y()}),url:y()}),r.update(e),r}return vt(n,t),n}(S);var wt={CUSTOM_EVENT_1:"custom_event_1",CUSTOM_EVENT_2:"custom_event_2",CUSTOM_EVENT_3:"custom_event_3",CUSTOM_EVENT_4:"custom_event_4",CUSTOM_EVENT_5:"custom_event_5"};var mt=["configure","conf","click","view","alias","signup","custom","product","purchase","addtocart","checkout","lead","custom_event_1","custom_event_2","custom_event_3","custom_event_4","custom_event_5"];var gt=new t;"function"==typeof window.fetch&&"function"==typeof Array.from&&function(t){(function(){if(U(_t))return!0;var t=window.location.search;return t.slice("?"===t.charAt(0)?1:0).split("&").map((function(t){return t.split("=").map(decodeURIComponent)})).filter((function(t){return"spdt_opt_out"===t[0]})).length>0?(C(_t,"1",3650),!0):void 0})()||(function(t){t.addListener("event",(function(n,e){D(n.data()),!0===e&&t.emit("send.events")}))}(t),function(t){t.addListener("debug.events",(function(n){t.addListener("event",n)}))}(t),J(t),function(t){var n=function(n,e){return t.emit("event",new $(n),e)},e=function(n,e){return t.emit("event",new Y(n),e)},r=function(n,e){return t.emit("event",new nt(n),!1!==e)},o=function(n,e){return t.emit("event",new ot(n),e)};t.on("product",n),t.on("PRODUCT",n),t.on("addtocart",e),t.on("ADDTOCART",e),t.on("purchase",r),t.on("PURCHASE",r),t.on("checkout",o),t.on("CHECKOUT",o)}(t),function(t){var n=function(n,e){return t.emit("event",new ut(n),!1!==e)},e=function(n,e){return t.emit("event",new lt(n),e)};t.on("lead",n),t.on("LEAD",n),t.on("signup",e),t.on("SIGNUP",e)}(t),function(t){var n=function(n,e){t.emit("event",new dt(n),!1!==e)};t.on("click",n),t.on("CLICK",n)}(t),function(t){var n={},e=function(e,r){e&&e.hasOwnProperty&&x.forEach((function(t){e.hasOwnProperty(t)&&"string"==typeof e[t]&&(n[t]=e[t])})),t.emit("event",new P(n),r)};t.on("view",e),t.on("VIEW",e);var r=new URLSearchParams(window.location.search).get("spclid");r&&sessionStorage.setItem("click_id",r)}(t),W(t),function(t){var n=function(n){_?console.hasOwnProperty("warn")&&console.warn("pixel already configured."):(_=!0,n&&(d=Object.keys(n).reduce((function(t,e){return d.hasOwnProperty(e)&&(t[e]=n[e]),t}),Object.assign({},d))),t.emit("configured",d),t.emit("view"))},e=function(n){_?console.hasOwnProperty("warn")&&console.warn("pixel already configured."):(_=!0,n&&(d=Object.keys(n).reduce((function(t,e){return d.hasOwnProperty(e)&&(t[e]=n[e]),t}),Object.assign({},d))),t.emit("configured",d))};t.on("configure",n),t.on("CONFIGURE",n),t.on("conf",e),t.on("CONF",e)}(t),function(t){var n=function(n,e){var r=new yt("CUSTOM_EVENT_1",n);r.action=wt.CUSTOM_EVENT_1,t.emit("event",r,e)},e=function(n,e){var r=new yt("CUSTOM_EVENT_2",n);r.action=wt.CUSTOM_EVENT_2,t.emit("event",r,e)},r=function(n,e){var r=new yt("CUSTOM_EVENT_3",n);r.action=wt.CUSTOM_EVENT_3,t.emit("event",r,e)},o=function(n,e){var r=new yt("CUSTOM_EVENT_4",n);r.action=wt.CUSTOM_EVENT_4,t.emit("event",r,e)},i=function(n,e){var r=new yt("CUSTOM_EVENT_5",n);r.action=wt.CUSTOM_EVENT_5,t.emit("event",r,e)};t.on("CUSTOM_EVENT_1",n),t.on("custom_event_1",n),t.on("CUSTOM_EVENT_2",e),t.on("custom_event_2",e),t.on("CUSTOM_EVENT_3",r),t.on("custom_event_3",r),t.on("CUSTOM_EVENT_4",o),t.on("custom_event_4",o),t.on("CUSTOM_EVENT_5",i),t.on("custom_event_5",i)}(t),setTimeout((function(){!function(t,n){void 0===n&&(n=5e3),F(t);var e=setInterval((function(){F(t)}),n);setTimeout((function(){clearInterval(e)}),6e6),t.addListener("send.events",(function(){F(t)}))}(t)}),1))}(gt);var Ot=function(t){console&&"function"==typeof console.warn&&console.warn("[Pixel SDK Warning] ".concat(t))},bt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>0){var e=t[0],r=t[1],o=function(t){var n=t.toLowerCase();return mt.includes(n)?{valid:!0}:{valid:!1,error:"Unsupported event type: '".concat(t,"'. Supported events are: ").concat(mt.join(", "))}}(e);return o.valid||Ot(o.error||"Invalid event: ".concat(e)),gt.emit(e,r,t[2]),new Promise((function(t){gt.once("api.captured",(function(){t()}))}))}return Ot("No event type specified"),Promise.resolve()};window.spdt&&window.spdt.q&&window.spdt.q.length&&window.spdt.q.forEach((function(t){bt.apply(void 0,t)})),window.pdst&&window.pdst.q&&window.pdst.q.length&&window.pdst.q.forEach((function(t){bt.apply(void 0,t)})),window.spdt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return bt.apply(void 0,t)},p()===f.VersionA&&(window.pdst=window.spdt),window.hasOwnProperty("onSPDTReady")&&window.onSPDTReady&&window.onSPDTReady(),window.hasOwnProperty("onPDSTReady")&&window.onPDSTReady&&window.onPDSTReady()})()})();